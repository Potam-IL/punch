<!-- vi: set et ts=4 sw=4 -->
## Desired Interface
name-glob below means a name optionally including '*' for any chars and
'?' for a single char. '\' is an escape character. (used fnmatch)

    punch tasks list
    punch tasks add/new name and the rest is comments
    punch tasks remove/del/rm -f/--force name-glob name-glob name-glob

`--force` prevents asking for confirmation prior to deletion.

**???: Any way to add command aliases when using argparse? Not until a later
Python -- see [aliases for positional arguments (subparsers)][aliases].

  [aliases]: http://bugs.python.org/issue9234

Or set a default subcommand when none is provided?
Yes, scan the args yourself and stick in the default. Yuck. **

    punch in name-glob
list tasks matching, or if just 1, declare it; no task lists all to choose from

    punch out comment

    punch times

What should punch times do, anyway? How about easy summary/selective listing?

    punch times --after DATE --before DATE --on DATE
    punch times --template 'name: {name}'

Template tokens:

    {name}, {n}
    {comment}, {c}
    {duration}, {d} -- duration in ISO format (PThhHmmMssS)
    {start}, {s} -- start date-time
    {end}, {e} -- end date-time -- approximate, assumes no time zone shift
        throughout duration

The approximate end time problem suggests we drop the start/duration format
and shift to a start/end format, since we can embed time info in *both* of
those. That does mean we will need to plumb another tzoffset into Task and
change out our formatting. It might be time to move to (dt, tz) pairs rather
than keeping them entirely separate.

Syntax:

    {token|filter/modifier}

Filters for duration (mutually exclusive):

    clock, c -- display as hh:mm:ss
    hours, h -- display as hours 9.999
    minutes, m -- display as minutes 9.999
    seconds, s -- display as seconds 999
    lower, l -- display as ptHHhMMmSSs -- like in file, but lowercase
        (which I find easier to read, since the number stick out more)

Modifier for duration:

    5[udb]? -- rounding and precision control

      number specifies the max number of digits after the decimal point
      udb are rounding modes - up, down, banker's

      affects only the seconds field with the clock filter

Filters for start/end:

    date -- just date
    time -- just time
    utc -- convert to UTC before displaying date/time

This highlights that we cannot recover local time info from UTC, but we can
recover UTC from local time info + offset. We will move to that instead.
It's also more convenient, since the user (naturally) works in their local
time zone, not in UTC.

## New Arch
* Task -- name, start, duration, comment

    ^(\S+)\s*([^/]+)/(\S+)\s*(.+)$

* TaskStream -- skips comment and blank lines
    - read(fileobj)
    - write(fileobj, taskseq)

* ISO -- handles ISO formatting, UTC->local conversions for summary
    - now() -- current date-time in UTC
    - duration(start=, stop=, duration=) supply any two, it returns the third
    - local(datetime) -- converts to local time

* Path -- global again -- config but named better

* Punch -- the tool, as an object

## TODO
* Add date -> range parser for punch times.
* Add templated task formatter.
* punch times:
    - before/after/on support using daterange parser
    - template support using TaskTemplate
* Drop the comment summary from times -- obsoleted by `punch times`.
* Document templates.
* Add --comment commentglob to tasks list, tasks remove, times.
    - If both name and commentglob are provided, AND the two lists.
